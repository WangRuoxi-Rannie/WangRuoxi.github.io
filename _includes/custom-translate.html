<!-- Google 翻译容器（隐藏） -->
<div id="google_translate_element" style="display:none;"></div>

<!-- 自定义翻译按钮 -->
<button id="custom-translate-button" 
        style="background: {{ site.navbar-col }}; 
               color: {{ site.navbar-text-col }};
               border: 1px solid {{ site.navbar-border-col }};
               padding: 6px 12px;
               border-radius: 4px;
               cursor: pointer;
               margin-left: 20px;">
  🌐 中/EN
</button>

<!-- Google 翻译脚本 -->
<script>
  function googleTranslateElementInit() {
    new google.translate.TranslateElement(
      { 
        pageLanguage: 'zh',
        includedLanguages: 'en,zh',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE,
        autoDisplay: false
      },
      'google_translate_element'
    );
  }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

<!-- 交互脚本 -->
<script>
  document.getElementById('custom-translate-button').addEventListener('click', () => {
    const select = document.querySelector('.goog-te-combo');
    if (select) {
      select.value = select.value === 'en' ? 'zh' : 'en';
      select.dispatchEvent(new Event('change'));
    }
    // 更新按钮颜色
    const button = document.getElementById('custom-translate-button');
    button.style.backgroundColor = select.value === 'en' ? '#0F59A4' : '#FDDB76';
    button.style.color = select.value === 'en' ? 'white' : '#0F59A4';
  });
</script>
